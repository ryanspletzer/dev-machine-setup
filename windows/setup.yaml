# DSC 3.0 configuration template for Windows developer machine setup
# This file defines the desired state configuration for a Windows developer environment

# Documentation: https://learn.microsoft.com/en-us/powershell/dsc/concepts/dsc3-overview

# Define version
version: 1.0.0
name: WindowsDevMachineSetup

# Define resources to be applied
resources:
  # Enable Windows Features
  - name: Windows_Features
    type: WindowsFeature
    properties: ${WindowsFeatures}

  # Install Chocolatey packages
  - name: ChocolateyPackages
    type: ChocolateyPackage
    properties: ${ChocolateyPackages}

  # Install PowerShell Modules
  - name: PowerShellModules
    type: PSModuleResource
    properties: ${PowerShellModules}

  # Configure Git settings
  # - name: GitConfig
  #   type: Script
  #   properties:
  #     getScript: |
  #       $gitEmail = git config --global --get user.email
  #       $gitName = git config --global --get user.name
  #       return @{
  #         Result = "Git configuration: Email=$gitEmail, Name=$gitName"
  #       }
  #     testScript: |
  #       $gitEmail = git config --global --get user.email
  #       $gitName = git config --global --get user.name
  #       $emailConfigured = -not [string]::IsNullOrEmpty($gitEmail)
  #       $nameConfigured = -not [string]::IsNullOrEmpty($gitName)
  #       return $emailConfigured -and $nameConfigured
  #     setScript: ${GitConfigScript}

  # Custom commands (like WSL installation)
  # - name: CustomCommands
  #   type: Script
  #   properties:
  #     getScript: |
  #       return @{
  #         Result = "Custom commands execution status"
  #       }
  #     testScript: |
  #       # Always return false to ensure the setScript runs
  #       return $false
  #     setScript: ${CustomCommands}
