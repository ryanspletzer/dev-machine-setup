# vars.yml
# Externalized variables for Ansible setup

# System configuration
install_rosetta: false  # Set to true to install Rosetta 2 (required for some Intel-based applications on Apple Silicon)

# Homebrew configuration
homebrew_taps:
  - aws/tap
  - azure/bicep
  - azure/functions
  - hashicorp/tap
  - microsoft/git
  - oven-sh/bun
  - teamookla/speedtest

homebrew_casks:
  - 1password
  - appcleaner
  - brave-browser
  - chatgpt
  - claude-code
  - citrix-workspace
  - comet
  - cursor
  - cursor-cli
  - docker-desktop
  - dotnet-sdk
  - drawio
  - elgato-camera-hub
  - firefox
  - font-caskaydia-cove-nerd-font
  - git-credential-manager
  - ghostty
  - google-chrome
  - gstreamer-runtime
  - handy
  - iterm2
  - keybase
  - kitty
  - krita
  - microsoft-azure-storage-explorer
  - microsoft-edge
  - microsoft-office
  - microsoft-teams
  - netnewswire
  - netspot
  - ngrok
  # Doesn't work without Rosetta 2
  # - parallels
  - obsidian
  - powershell
  - rectangle-pro
  - steam
  - synologyassistant
  - tailscale-app
  - taskexplorer
  - utm
  - virtualbox
  - visual-studio-code
  - vlc
  - windows-app
  - wine-stable
  # Doesn't work without Rosetta 2
  # - yubico-yubikey-manager
  - zoom
  - zulu

homebrew_formulae:
  - aws-sam-cli
  - awscli
  - azure-cli
  - azure-functions-core-tools@4
  - bash
  - bash-git-prompt
  - bash-completion
  - bat
  - bicep
  - cfn-lint
  - chruby
  - chruby-fish
  - cmake
  - direnv
  - docker-completion
  - elixir
  - emacs
  - eza
  - fd
  - ffmpeg
  - fish
  - fzf
  - gh
  - git
  - git-delta
  - git-lfs
  - go
  - hashicorp/tap/packer
  - hashicorp/tap/terraform
  - hashicorp/tap/vault
  - istioctl
  - jq
  - kubernetes-cli
  - lazygit
  - markdownlint-cli
  - markdownlint-cli2
  - mas
  - maven
  - mcp-inspector
  - mtr
  - neovim
  - node
  - nvm
  - oh-my-posh
  - oven-sh/bun/bun
  - pinentry-mac
  - pipx
  - pnpm
  - pyenv-virtualenv
  - python
  - qemu
  - rip2
  - ripgrep
  - ruby-install
  - ruff
  - rustup
  - tdd-guard
  - teamookla/speedtest/speedtest
  - tmux
  - tree-sitter-cli
  - uv
  - ykman
  - yq
  - wget2
  - xh
  - zsh-autocomplete
  - zsh-autosuggestions
  - zsh-syntax-highlighting

# PowerShell modules
powershell_modules:
  - AWS.Tools.Common
  - Az.Accounts
  - ExchangeOnlineManagement
  - Microsoft.Graph.Authentication
  - Pester
  - platyPS
  - posh-git
  - powershell-yaml
  - PowerShellBuild
  - psake
  - PSGraphQL
  - PSJsonWebToken
  - PSReadLine
  - PSScriptAnalyzer
  - PSTcpIp
  - Terminal-Icons

# pipx modules
pipx_packages:
  - poetry
  - taskcat

npm_global_packages:
  - '@vue/cli'
  - '@github/copilot'
  - aws-cdk
  - npmrc
  - serverless
  - typescript

# .NET Global Tools
dotnet_tools:
  - Amazon.Lambda.Tools

# VS Code extensions
# You can list your VS Code extensions with the command:
# code --list-extensions
# and then format them as shown below.
vscode_extensions:
  # Packer
  - 4ops.packer
  # Project Manager
  - alefragnani.project-manager
  # Swagger Viewer
  - arjun.swagger-viewer
  # CloudFormation Linter
  - aws-scripting-guy.cform
  # Ruff
  - charliermarsh.ruff
  # gitignore
  - codezombiech.gitignore
  # Markdownlint
  - davidanson.vscode-markdownlint
  # ESLint
  - dbaeumer.vscode-eslint
  # Docker
  - docker.docker
  # Git Extension Pack
  - donjayamanne.git-extension-pack
  # Git History
  - donjayamanne.githistory
  # GitLens â€” Git supercharged
  - eamodio.gitlens
  # Prettier - Code formatter
  - esbenp.prettier-vscode
  # Solution Explorer
  - fernandoescolar.vscode-solution-explorer
  # GitHub Copilot
  - github.copilot
  # GitHub Copilot Chat
  - github.copilot-chat
  # GitHub Actions
  - github.vscode-github-actions
  # GitHub Pull Requests and Issues
  - github.vscode-pull-request-github
  # Go
  - golang.go
  # Excel Viewer
  - grapecity.gc-excelviewer
  # Test Explorer UI
  - hbenl.vscode-test-explorer
  # Kusto Syntax Highlighting
  - josin.kusto-syntax-highlighting
  # DocComment
  - k--kato.docomment
  # Render CRLF
  - medo64.render-crlf
  # Git Graph
  - mhutchie.git-graph
  # Swagger Doc Viewer
  - mimarec.swagger-doc-viewer
  # Prettify JSON
  - mohsen1.prettify-json
  # Azure Functions
  - ms-azuretools.vscode-azurefunctions
  # Azure Resource Groups
  - ms-azuretools.vscode-azureresourcegroups
  # Bicep
  - ms-azuretools.vscode-bicep
  # Azure Containers
  - ms-azuretools.vscode-containers
  # Docker (Microsoft)
  - ms-azuretools.vscode-docker
  # .NET Dev Kit
  - ms-dotnettools.csdevkit
  # C#
  - ms-dotnettools.csharp
  # .NET Install Tool for Extension Authors
  - ms-dotnettools.vscode-dotnet-runtime
  # Kubernetes
  - ms-kubernetes-tools.vscode-kubernetes-tools
  # Data Workspace
  - ms-mssql.data-workspace-vscode
  # SQL Server (mssql)
  - ms-mssql.mssql
  # SQL Bindings
  - ms-mssql.sql-bindings-vscode
  # SQL Database Projects
  - ms-mssql.sql-database-projects-vscode
  # Debugpy
  - ms-python.debugpy
  # isort
  - ms-python.isort
  # Python
  - ms-python.python
  # Pylance
  - ms-python.vscode-pylance
  # Jupyter
  - ms-toolsai.jupyter
  # Jupyter Keymap
  - ms-toolsai.jupyter-keymap
  # Jupyter Renderers
  - ms-toolsai.jupyter-renderers
  # Jupyter Cell Tags
  - ms-toolsai.vscode-jupyter-cell-tags
  # Jupyter Slideshow
  - ms-toolsai.vscode-jupyter-slideshow
  # Remote - Containers
  - ms-vscode-remote.remote-containers
  # Remote - SSH
  - ms-vscode-remote.remote-ssh
  # Remote - SSH: Editing Configuration Files
  - ms-vscode-remote.remote-ssh-edit
  # Remote - WSL
  - ms-vscode-remote.remote-wsl
  # Remote Development Extension Pack
  - ms-vscode-remote.vscode-remote-extensionpack
  # CMake Tools
  - ms-vscode.cmake-tools
  # C/C++ Extension Pack
  - ms-vscode.cpptools
  # C/C++ Extension Pack
  - ms-vscode.cpptools-extension-pack
  # C/C++ Themes
  - ms-vscode.cpptools-themes
  # Hex Editor
  - ms-vscode.hexeditor
  # Makefile Tools
  - ms-vscode.makefile-tools
  # PowerShell
  - ms-vscode.powershell
  # Remote Explorer
  - ms-vscode.remote-explorer
  # Remote Server
  - ms-vscode.remote-server
  # Test Adapter Converter
  - ms-vscode.test-adapter-converter
  # Live Share
  - ms-vsliveshare.vsliveshare
  # Azure Resource Manager (ARM) Tools
  - msazurermtools.azurerm-vscode-tools
  # Vetur
  - octref.vetur
  # Indent Rainbow
  - oderwat.indent-rainbow
  # Parallels Desktop
  - parallelsdesktop.parallels-desktop
  # Pester Test Adapter
  - pspester.pester-test
  # Thunder Client
  - rangav.vscode-thunder-client
  # Language Support for Java(TM) by Red Hat
  - redhat.java
  # VSCode Commons
  - redhat.vscode-commons
  # YAML
  - redhat.vscode-yaml
  # C# Test Adapter
  - samirat.csharp-test-adapter
  # SCSS Formatter
  - sibiraj-s.vscode-scss-formatter
  # Code Spell Checker
  - streetsidesoftware.code-spell-checker
  # Markdown Table Formatter
  - takumii.markdowntable
  # Microsoft Teams Toolkit
  - teamsdevapp.ms-teams-vscode-extension
  # Adaptive Cards
  - teamsdevapp.vscode-adaptive-cards
  # CMake
  - twxs.cmake
  # Inline Values PowerShell
  - tylerleonhardt.vscode-inline-values-powershell
  # Sort Lines
  - tyriar.sort-lines
  # Error Lens
  - usernamehw.errorlens
  # IntelliCode API Usage Examples
  - visualstudioexptteam.intellicode-api-usage-examples
  # IntelliCode
  - visualstudioexptteam.vscodeintellicode
  # Gradle for Java
  - vscjava.vscode-gradle
  # Java Debugger
  - vscjava.vscode-java-debug
  # Java Dependency Viewer
  - vscjava.vscode-java-dependency
  # Java Extension Pack
  - vscjava.vscode-java-pack
  # Java Test Runner
  - vscjava.vscode-java-test
  # Maven for Java
  - vscjava.vscode-maven
  # VSCode Icons
  - vscode-icons-team.vscode-icons
  # CodeTour
  - vsls-contrib.codetour
  # Volar
  - vue.volar
  # Git Blame
  - waderyan.gitblame
  # Markdown All in One
  - yzhang.markdown-all-in-one
  # Open in GitHub
  - ziyasal.vscode-open-in-github

# Git configuration
git_user_email: ''  # REQUIRED: Set your email here or pass via command line with -e flag
git_user_name: "{{ lookup('pipe', 'id -F') }}"  # Defaults to macOS user's full name

# Custom commands and scripts (optional)
# These commands will be executed as the current user (non-elevated)
custom_commands_user:
  # Show hidden files in Finder
  - echo "Showing hidden files in Finder..."
  - defaults write com.apple.finder AppleShowAllFiles -bool true
  # Show path bar in Finder
  - echo "Showing path bar in Finder..."
  - defaults write com.apple.finder ShowPathbar -bool true
  # Show status bar in Finder
  - echo "Showing status bar in Finder..."
  - defaults write com.apple.finder ShowStatusBar -bool true
  # Disable the warning when changing file extensions
  - echo "Disabling warning when changing file extensions..."
  - defaults write com.apple.finder FXEnableExtensionChangeWarning -bool false
  # Avoid creating .DS_Store files on network or USB volumes
  - echo "Disabling .DS_Store file creation on network and USB volumes..."
  - defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true
  - defaults write com.apple.desktopservices DSDontWriteUSBStores -bool true
  # Use list view in all Finder windows by default
  - echo "Setting Finder default view to list view..."
  - defaults write com.apple.finder FXPreferredViewStyle -string "Nlsv"
  # Auto-hide the Dock and change delay and animation speed
  - echo "Configuring Dock auto-hide settings..."
  - defaults write com.apple.dock autohide -bool true
  - defaults write com.apple.dock autohide-delay -float 0
  - defaults write com.apple.dock autohide-time-modifier -float 0
  # Turn off "Show suggested and recent apps in Dock"
  - echo "Turning off suggested and recent apps in Dock..."
  - defaults write com.apple.dock show-recents -bool false
  - defaults write com.apple.dock show-suggested-and-recent-apps -int 0
  # Configure TextEdit to use plain text by default
  - echo "Setting TextEdit to use plain text by default..."
  - defaults write com.apple.TextEdit RichText -int 0
  # Trackpad gesture settings
  - echo "Configuring trackpad settings..."
  # Set tracking speed (just past middle, value around 1.5)
  - defaults write -g com.apple.trackpad.scaling -float 1
  # Turn off natural scrolling
  - defaults write -g com.apple.swipescrolldirection -bool false
  # Turn off swipe between pages
  - defaults write -g AppleEnableSwipeNavigateWithScrolls -bool false
  # Set App Expose to swipe down with three fingers
  - defaults write com.apple.dock showAppExposeGestureEnabled -bool true
  - defaults write com.apple.AppleMultitouchTrackpad TrackpadThreeFingerVertSwipeGesture -int 2
  - defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadThreeFingerVertSwipeGesture -int 2
  # Hide desktop icons
  - echo "Hiding desktop icons..."
  - defaults write com.apple.finder CreateDesktop -bool false
  # Keep folders on top when sorting by name in Finder
  - echo "Setting Finder to keep folders on top when sorting by name..."
  - defaults write com.apple.finder _FXSortFoldersFirst -bool true
  # Disable natural scrolling
  - echo "Disabling natural scrolling..."
  - defaults write -g com.apple.swipescrolldirection -bool false
  # Disable swipe between pages
  - echo "Disabling swipe between pages..."
  - defaults write -g AppleEnableSwipeNavigateWithScrolls -bool false
  # Set app expose to swipe down with three fingers
  - echo "Setting App Expose to swipe down with three fingers..."
  - defaults write com.apple.dock showAppExposeGestureEnabled -bool true
  # Turn off Auto Capitalization
  - echo "Turning off Auto Capitalization..."
  - defaults write -g NSAutomaticCapitalizationEnabled -bool false
  # Turn off Hot Corners
  - echo "Disabling Hot Corners..."
  - defaults write com.apple.dock wvous-br-corner -int 0
  - defaults write com.apple.dock wvous-br-modifier -int 0
  # Restart affected applications
  - echo "Restarting affected applications..."
  - killall Finder
  - killall Dock
  - killall Safari 2>/dev/null || true
  - killall TextEdit 2>/dev/null || true
  # Update PowerShell help
  - echo "Updating PowerShell help documentation..."
  - pwsh -Command "Update-Help -Force -ErrorAction SilentlyContinue"
  # Set PSResource Repository PSGallery as trusted repository
  - echo "Setting PSResource Repository PSGallery as trusted repository..."
  - pwsh -Command "Set-PSRepository -Name PSGallery -Trusted"
  # Install Git LFS
  - echo "Installing Git LFS..."
  - git lfs install
  # Set git configs
  - echo "Setting global git configurations..."
  - git config --global commit.gpgsign true
  - git config --global init.defaultBranch main
  - git config --global gpg.program /opt/homebrew/bin/gpg
  - git config --global push.default current
  - git config --global push.autoSetupRemote true
  - git config --global user.signingKey 787AEF0BAE232359
  # Configure GPG agent to use pinentry-mac (native macOS dialog for YubiKey PIN)
  - echo "Configuring GPG agent to use pinentry-mac..."
  - mkdir -p ~/.gnupg
  - "echo 'pinentry-program /opt/homebrew/bin/pinentry-mac' > ~/.gnupg/gpg-agent.conf"
  - gpgconf --kill gpg-agent
  # Rustup init
  - echo "Initializing Rust toolchain..."
  - rustup-init -y
  # Ruby Install for Jekyll
  - echo "Installing Ruby 3.4.1 via ruby-install..."
  - ruby-install ruby 3.4.1
  # Install Jekyll
  - echo "Installing Jekyll gem..."
  - gem install jekyll
  # Install Amazon Kindle via mas
  - echo "Installing Amazon Kindle via mas..."
  - mas install 302584613
  # Install Xcode via mas
  - echo "Installing Xcode via mas..."
  - mas install 497799835
  # Install Microsoft To Do via mas
  - echo "Installing Microsoft To Do via mas..."
  - mas install 1274495053
  # Make nvm's working directory
  - echo "Creating nvm working directory..."
  - mkdir -p ~/.nvm
  # Install TPM (tmux Plugin Manager)
  - echo "Installing tmux Plugin Manager (TPM)..."
  - "if [ ! -d ~/.tmux/plugins/tpm ]; then git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm; fi"
  # Install LazyVim starter (if Neovim config doesn't exist)
  - echo "Installing LazyVim starter config..."
  - "if [ ! -d ~/.config/nvim ]; then git clone https://github.com/LazyVim/starter ~/.config/nvim && rm -rf ~/.config/nvim/.git; fi"
  # Install TPM plugins (non-interactive)
  - echo "Installing tmux plugins via TPM..."
  - "~/.tmux/plugins/tpm/bin/install_plugins 2>/dev/null || true"
  # Install Ghostty terminfo (needed for curses-based tools like pinentry-curses)
  - echo "Installing Ghostty terminfo..."
  - mkdir -p ~/.terminfo/67 ~/.terminfo/78
  - 'cp "$(brew --prefix)"/Caskroom/ghostty/*/Ghostty.app/Contents/Resources/terminfo/78/xterm-ghostty ~/.terminfo/78/'
  - 'cp "$(brew --prefix)"/Caskroom/ghostty/*/Ghostty.app/Contents/Resources/terminfo/67/ghostty ~/.terminfo/67/'
  # Clone powershell-style skill repo
  - echo "Cloning powershell-style Claude Code skill..."
  - "if [ ! -d ~/git/powershell-style ]; then mkdir -p ~/git && git clone https://github.com/ryanspletzer/powershell-style.git ~/git/powershell-style; fi"
  # Symlink powershell-style skill into Claude Code skills
  - echo "Linking powershell-style skill..."
  - "mkdir -p ~/.claude/skills && ln -sfn ~/git/powershell-style ~/.claude/skills/powershell-style"
  # iTerm2 global preferences (non-default)
  - echo "Configuring iTerm2 preferences..."
  # Disable press-and-hold accent menu (enables key repeat)
  - defaults write com.googlecode.iterm2 ApplePressAndHoldEnabled -bool false
  # Manual window tabbing
  - defaults write com.googlecode.iterm2 AppleWindowTabbingMode -string manual
  # Disable haptic/sound/visual feedback for Esc
  - defaults write com.googlecode.iterm2 HapticFeedbackForEsc -bool false
  - defaults write com.googlecode.iterm2 SoundForEsc -bool false
  - defaults write com.googlecode.iterm2 VisualIndicatorForEsc -bool false
  # Hide full-screen tab bar
  - defaults write com.googlecode.iterm2 ShowFullScreenTabBar -bool false
  # Hide secure keyboard entry indicator
  - defaults write com.googlecode.iterm2 ShowSecureKeyboardEntryIndicator -bool false
  # Ignore system window restoration
  - defaults write com.googlecode.iterm2 NoSyncIgnoreSystemWindowRestoration -bool true
  # Suppress paste warning
  - defaults write com.googlecode.iterm2 NoSyncNeverAllowPaste -bool true
  # Disable tip of the day
  - defaults write com.googlecode.iterm2 NoSyncPermissionToShowTip -bool false
  # Don't restore workspace on launch
  - defaults write com.googlecode.iterm2 NoSyncWindowRestoresWorkspaceAtLaunch -bool false
  # Suppress clipboard access denied warning
  - defaults write com.googlecode.iterm2 NoSyncSuppressClipboardAccessDeniedWarning -bool true
  # Allow escape sequences to clear history
  - defaults write com.googlecode.iterm2 PreventEscapeSequenceFromClearingHistory -bool false
  # Don't send profile info with update checks
  - defaults write com.googlecode.iterm2 SUSendProfileInfo -bool false
  # Symlink Dynamic Profile (font, colors, bell, etc.) into iTerm2
  - mkdir -p ~/Library/Application\ Support/iTerm2/DynamicProfiles
  - ln -sfn ~/.config/iterm2/DynamicProfiles/Default.json ~/Library/Application\ Support/iTerm2/DynamicProfiles/Default.json
  # Set the Dynamic Profile as the default
  - defaults write com.googlecode.iterm2 "Default Bookmark Guid" -string "73B7EAE3-0AF4-467E-9B9C-BDFA2185DAB3"
  # Example: Dark mode
  # - defaults write -g AppleInterfaceStyle Dark
  # Example: Key repeat settings
  # - defaults write -g InitialKeyRepeat -int 15
  # - defaults write -g KeyRepeat -int 2

# These commands will be executed with elevated privileges (sudo)
custom_commands_elevated:
  # Add fish to /etc/shells if not already present
  - echo "Adding fish shell to /etc/shells..."
  - "if ! grep -q \"/opt/homebrew/bin/fish\" /etc/shells; then echo \"/opt/homebrew/bin/fish\" | sudo tee -a /etc/shells; fi"
  # Set "Prevent automatic sleeping on power adapter when the display is off"
  - echo "Setting system to prevent automatic sleeping on power adapter when display is off..."
  - pmset -c sleep 0
  # Change default shell to PowerShell
  # TODO: FIGURE OUT AN APPROCH TO CHANGE THE DEFAULT SHELL
  # - chsh -s /usr/local/bin/pwsh

# Custom script path (optional)
# Provide the path to a custom script that will be executed at the end of the setup
custom_script: "./examples/custom_script.sh"
